import"./lw-chart.js";import{themeColors}from"../../../theme-colors";!function(){const t=document.createElement("template");t.innerHTML='\n    <style>\n    :host {\n        display: block;\n    }\n    :host[hidden] {\n        display: none;\n    }\n    #example {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n    }\n    #chart {\n        flex-grow: 1;\n    }\n    #buttons {\n        flex-direction: row;\n    }\n    button {\n        border-radius: 8px;\n        border: 1px solid transparent;\n        padding: 0.5em 1em;\n        font-size: 1em;\n        font-weight: 500;\n        font-family: inherit;\n        background-color: var(--hero-button-background-color-active, #e9e9e9);\n        color: var(--hero-button-text-color, #e9e9e9);\n        cursor: pointer;\n        transition: border-color 0.25s;\n        margin-left: 0.5em;\n      }\n      button:hover {\n        border-color: #3179F5;\n        background-color: var(--hero-button-background-color-hover);\n        color: var(--hero-button-text-color-hover-active);\n      }\n      button:focus,\n      button:focus-visible {\n        outline: 4px auto -webkit-focus-ring-color;\n      }\n        \n      #example-chart {\n        height: var(--lwchart-height, 300px);\n      }\n    </style>\n    <div id="example">\n        <div id="example-container">\n            <lightweight-chart id="example-chart"\n                autosize\n                type="line"\n            ></lightweight-chart>\n        </div>\n        <div id="buttons">\n            <button id="change-colours-button" type="button">Set Random Colors</button>\n            <button id="change-type-button" type="button">Change Chart Type</button>\n            <button id="change-data-button" type="button">Change Data</button>\n        </div>\n    </div>\n  ';const e=()=>Math.round(255*Math.random()),o={area:[["topColor",.4],["bottomColor",0],["lineColor",1]],bar:[["upColor",1],["downColor",1]],baseline:[["topFillColor1",.28],["topFillColor2",.05],["topLineColor",1],["bottomFillColor1",.28],["bottomFillColor2",.05],["bottomLineColor",1]],candlestick:[["upColor",1],["downColor",1],["borderUpColor",1],["borderDownColor",1],["wickUpColor",1],["wickDownColor",1]],histogram:[["color",1]],line:[["color",1]]},n=()=>"dark"===document.documentElement.getAttribute("data-theme");class r extends HTMLElement{constructor(){super(),this.chartElement=void 0}connectedCallback(){if(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.changeChartTheme(n()),window.MutationObserver){const t=t=>{this.changeChartTheme(n())};this.observer=new window.MutationObserver(t),this.observer.observe(document.documentElement,{attributes:!0})}this.chartElement=this.shadowRoot.querySelector("#example-chart"),this._changeData(),this.addButtonClickHandlers(),this.chartElement.chart.timeScale().fitContent()}addButtonClickHandlers(){this.changeColours=()=>this._changeColours(),this.changeType=()=>this._changeType(),this.changeData=()=>this._changeData(),this.shadowRoot.querySelector("#change-colours-button").addEventListener("click",this.changeColours),this.shadowRoot.querySelector("#change-type-button").addEventListener("click",this.changeType),this.shadowRoot.querySelector("#change-data-button").addEventListener("click",this.changeData)}removeButtonClickHandlers(){this.changeColours&&this.shadowRoot.querySelector("#change-colours-button").removeEventListener("click",this.changeColours),this.changeType&&this.shadowRoot.querySelector("#change-type-button").removeEventListener("click",this.changeType),this.changeData&&this.shadowRoot.querySelector("#change-data-button").removeEventListener("click",this.changeData)}_changeColours(){if(!this.chartElement)return;const t={};o[this.chartElement.type].forEach((o=>{t[o[0]]=((t=1)=>`rgba(${e()}, ${e()}, ${e()}, ${t})`)(o[1])})),this.chartElement.seriesOptions=t}_changeData(){if(!this.chartElement)return;const t=function(t){const e=25+25*Math.random(),o=t=>t*(.5+.2*Math.sin(t/10)+.4*Math.sin(t/20)+.8*Math.sin(t/e)+.5*Math.sin(t/500))+200,n=[],r=new Date(Date.UTC(2018,0,1,0,0,0,0)),a=t?100:500;for(let i=0;i<a;++i){const e=r.getTime()/1e3,a=o(i);if(t){const t=[-1*Math.random(),Math.random(),Math.random()].map((t=>10*t)),r=Math.sin(Math.random()-.5);n.push({time:e,low:a+t[0],high:a+t[1],open:a+r*t[2],close:o(i+1)})}else n.push({time:e,value:a});r.setUTCDate(r.getUTCDate()+1)}return n}(["candlestick","bar"].includes(this.chartElement.type));if(this.chartElement.data=t,"baseline"===this.chartElement.type){const e=t.reduce(((t,e)=>t+e.value),0)/t.length;this.chartElement.seriesOptions={baseValue:{type:"price",price:e}}}}_changeType(){if(!this.chartElement)return;const t=["line","area","baseline","histogram","candlestick","bar"].filter((t=>t!==this.chartElement.type)),e=Math.round(Math.random()*(t.length-1));this.chartElement.type=t[e],this._changeData(),this.chartElement.chart.timeScale().fitContent()}disconnectedCallback(){}changeChartTheme(t){if(!this.chartElement)return;const e=t?themeColors.DARK:themeColors.LIGHT,o=t?"#424F53":"#D6DCDE";this.chartElement.options={layout:{textColor:e.CHART_TEXT_COLOR,background:{color:e.CHART_BACKGROUND_COLOR}},grid:{vertLines:{color:o},horzLines:{color:o}}}}}window.customElements.define("lightweight-chart-example",r)}();